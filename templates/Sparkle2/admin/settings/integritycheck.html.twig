{% extends "Sparkle2/userarea.html.twig" %}

{% block custom_css %}
<link href="../templates/Sparkle2/assets/css/switch.css"
	rel="stylesheet">
{% endblock %}

{% block content %}
<div class="card">
	<div class="card-header">
		<ul class="nav nav-tabs card-header-tabs" id="subnav-tab"
			role="tablist">
			<li class="nav-item"><a class="nav-link active"
				id="subnav-ick-tab" data-toggle="tab" href="#tab-ick" role="tab"
				aria-controls="subnav-ick" aria-selected="true">{{ lng('admin.integritycheck') }}</a></li>
		</ul>
	</div>
	<div class="card-body tab-content" id="subnav-tabContent">
		<div class="tab-pane fade show active" id="tab-ick" role="tabpanel"
			aria-labelledby="subnav-ick-tab">
			<div class="row">
				<div class="col-sm-12 col-md-6 offset-md-3">
					<h5 class="mb-3">
						<i class="fas fa-check-circle"></i>&nbsp;
						{{ lng('admin.integritycheck') }}
					</h5>
					<ul class="list-group">
						{% set has_errors = false %}
						{% for check in checks %}
						{% if check.result != 1 %}
						{% set has_errors = true %}
						{% endif %}
						<li
							class="list-group-item d-flex justify-content-between align-items-center {% if check.result == 1 %}list-group-item-success{% else %}list-group-item-danger{% endif %}">
							{{ check.checkdesc|raw }} <span
							class="fas fa-{% if check.result == 1 %}check{% else %}exclamation-triangle{% endif %}"></span>
						</li>
						{% endfor %}
					</ul>
					{% if has_errors %}
					<div class="form-group form-row mt-2 text-center">
						<div class="col">
							<a href="index.php?module=AdminSettings&view=integritycheckFix"
								class="btn btn-primary"><i class="fas fa-briefcase-medical"></i>&nbsp;{{ lng('admin.integrityfix') }}
							</a>
						</div>
					</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
