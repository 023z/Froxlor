{% extends "Sparkle2/userarea.html.twig" %}

{% block content %}
<div class="card">
	<div class="card-header">
		<ul class="nav nav-tabs card-header-tabs" id="subnav-tab"
			role="tablist">
			<li class="nav-item"><a class="nav-link active"
				id="subnav-crn-tab" data-toggle="tab" href="#tab-crn" role="tab"
				aria-controls="subnav-crn" aria-selected="true">{{ lng('admin.cron.cronsettings') }}&nbsp;<span
					class="badge badge-pill badge-secondary">{{ cronjobs.count }}</span></a></li>
		</ul>
	</div>
	<div class="card-body tab-content" id="subnav-tabContent">
		<div class="tab-pane fade show active" id="tab-crn" role="tabpanel"
			aria-labelledby="subnav-crn-tab">
			<div class="card">
				<div class="card-body" id="cronjobs-list">
					{% import "Sparkle2/table-listing.html.twig" as t %}
					{% set content %}
					{% for cronjob in cronjobs.list %}
					<tr class="d-flex">
						<td class="col-sm-4"><strong>{{ cronjob.description|raw }}</strong></td>
						<td class="col-sm-3">{{ cronjob.lastrun|date('d.m.Y H:i') }}</td>
						<td class="col-sm-2">{{ cronjob.interval }}</td>
						<td class="col-sm-1">{% if cronjob.isactive %}<span
							class="text-success"><i class="fas fa-check-circle"></i></span>
						{% else %}<span class="text-danger"><i
								class="fas fa-times-circle"></i></span>
						{% endif %}</td>
						<td class="col-sm-2 text-right"><a href="#"
							class="text-danger delete-btn" data-id="{{ cronjob.id }}"
							data-container="body" data-toggle="tooltip" data-placement="left"
							title="{% trans "Cronjob lÃ¶schen" %}"><i
								class="fas fa-trash-alt"></i></a></td>
					</tr>
					{% endfor %}
					{% endset %}
					{% if cronjobs.count > 0 %}
					{{ t.listing("cronjobs-listing", [lng('cron.description'), lng('cron.lastrun'), lng('cron.interval'), lng('cron.isactive'), "|" ~ lng('panel.options')], content, [4,3,2,1,2]) }}
					{% else %}
					<div class="alert alert-info" role="alert">
						{% trans "Keine Cronjobs" %}
					</div>
					{% endif %}
				</div>
			</div>
		</div>

	</div>
</div>
{% endblock %}
