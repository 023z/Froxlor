{% macro listing(tablename, header, content, sizes, nosearch, pagination, currentpage, allentries, baseurl) %}
{% if not nosearch|default(false) and pagination|default(false) %}
<!-- pagination and search -->
<div class="row">
	<div class="col-lg-8 col-md-12">
		<nav aria-label="table pagination">
			<ul class="pagination">
				{% set pages = allentries / get_setting('panel.paging') %}
				{% if  currentpage >= 10 %}
					{% set rangestart = max(currentpage - 5, 0) %}
					{% set rangeend = min(currentpage + 5, pages) %}
				{% else %}
				    {% set rangestart = 0 %}
				    {% set rangeend = min(pages, 10) %}
				{% endif %}
				{% if currentpage == 0 %}
				<li class="page-item disabled"><span class="page-link">Previous</span></li>
				{% else %}
				<li class="page-item"><a class="page-link" href="{{ baseurl }}&page={{ currentpage - 1 }}">Previous</a></li>
				{% endif %}
				{% for page in range(rangestart, rangeend) %}
				{% if currentpage == page %}
				<li class="page-item active"><span class="page-link">{{ page + 1 }}
						<span class="sr-only">(current)</span></span></li>
				{% else %}
				<li class="page-item"><a class="page-link"
					href="{{ baseurl }}&page={{ page }}">{{ page + 1 }}</a></li>
				{% endif %}
				{% endfor %}
				{% if currentpage == pages %}
				<li class="page-item disabled"><span class="page-link">Next</span></li>
				{% else %}
				<li class="page-item"><a class="page-link" href="{{ baseurl }}&page={{ currentpage + 1 }}">Next</a></li>
				{% endif %}
			</ul>
		</nav>
	</div>
	<div class="col-lg-4 col-md-12 text-right">
		<input class="form-control" id="{{ tablename }}-input" type="text"
			placeholder="{% trans "Suche..." %}"><br />
	</div>
</div>
{% elseif not nosearch|default(false) and not pagination|default(false) %}
<!-- only search -->
<div class="row">
	<div class="col-lg-4 offset-lg-8 col-md-12 text-right">
		<input class="form-control" id="{{ tablename }}-input" type="text"
			placeholder="{% trans "Suche..." %}"><br />
	</div>
</div>
{% elseif nosearch|default(false) and paginationn|default(false) %}
<!-- only pagination -->
<div class="row">
	<div class="col-12">
		<nav aria-label="table pagination">
			<ul class="pagination">
				{% set pages = allentries / get_setting('panel.paging') %}
				{% if  currentpage >= 10 %}
					{% set rangestart = max(currentpage - 5, 0) %}
					{% set rangeend = min(currentpage + 5, pages) %}
				{% else %}
				    {% set rangestart = 0 %}
				    {% set rangeend = min(pages, 10) %}
				{% endif %}
				{% if currentpage == 0 %}
				<li class="page-item disabled"><span class="page-link">Previous</span></li>
				{% else %}
				<li class="page-item"><a class="page-link" href="{{ baseurl }}&page={{ currentpage - 1 }}">Previous</a></li>
				{% endif %}
				{% for page in range(rangestart, rangeend) %}
				{% if currentpage == page %}
				<li class="page-item active"><span class="page-link">{{ page + 1 }}
						<span class="sr-only">(current)</span></span></li>
				{% else %}
				<li class="page-item"><a class="page-link"
					href="{{ baseurl }}&page={{ page }}">{{ page + 1 }}</a></li>
				{% endif %}
				{% endfor %}
				{% if currentpage == pages %}
				<li class="page-item disabled"><span class="page-link">Next</span></li>
				{% else %}
				<li class="page-item"><a class="page-link" href="{{ baseurl }}&page={{ currentpage + 1 }}">Next</a></li>
				{% endif %}
			</ul>
		</nav>
	</div>
</div>
{% endif %}
<div class="table-responsive">
	<table class="table table-striped table-hover table-sm"
		id="{{ tablename }}">
		<thead>
			<tr class="d-flex">
				{% for idx,head in header %}
				<!-- centered -->
				{% if head[:1] == '*' %}
				{% set head = head[1:] %}
				<th scope="col"
					class="{% if sizes[idx] is defined %}col-{{ sizes[idx] }} {% endif %}text-center">
					<!-- right-aligned --> {% elseif head[:1] == '|' %} {% set head = head[1:] %}
				<th scope="col"
					class="{% if sizes[idx] is defined %}col-{{ sizes[idx] }} {% endif %}text-right">
					<!-- left-aligned --> {% else %}
				<th scope="col" {% if sizes[idx] is defined %}
					class="col-{{ sizes[idx] }}" {% endif %}>{% endif %} {{ head }}</th>
				{% endfor %}
			</tr>
		</thead>
		<tbody id="{{ tablename }}-body">
			{{ content }}
		</tbody>
	</table>
</div>
{% if not nosearch|default(false) %}
<script>
	$(document).ready(function() {
		$("#{{ tablename }}-input").on("keyup", function() {
			var value = $(this).val().toLowerCase();
			$("#{{ tablename }}-body tr").filter(function() {
				if ($(this).text().toLowerCase().indexOf(value) > -1) {
					$(this).removeClass("d-none");
					$(this).addClass("d-flex");
				} else {
					$(this).addClass("d-none");
					$(this).removeClass("d-flex");
				}
			});
		});
	});
</script>
{% endif %}
{% endmacro %}
